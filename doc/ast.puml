@startuml AST of DSL from SC language

!theme crt-amber
hide circle

package ast {

    class SC {
        +fly Fly
    }
    SC --> Fly

    class Fly {
        +strand Strand
    }
    Fly --> Strand

    class Strand {
        +genome Genome[]
    }
    Strand --> Genome

    enum Genome {
        Anatomy
        Behavior
    }
    Genome --> Anatomy
    Genome --> Behavior

    enum Anatomy {
        Bug
        Totem
    }
    Anatomy --> Bug
    Anatomy --> Totem

    class Totem {
        +insignia Insignia
        +folklores Folklore[]
    }
    Totem --> Insignia
    Totem --> Folklore

    class Insignia {
        +raw Str
    }

    class Folklore {
        +prophecy Str
        +runes Runes?
    }
    Folklore --> Runes

    enum Runes {
        Whispers(Vec<Specie>)
        Invocations(Vec<Entity>)
    }
    Runes --> Entity

    class Entity {
        +primor Str
        +specie Str
    }

    enum Behavior {
' Statement
        Beat
' Assign
        Pollinate
' Oop
        Trace
    }
    Behavior --> Beat
    Behavior --> Pollinate
    Behavior --> Trace

    enum Beat {
' IF
        Sprout
' WHILE
        Swirl
' FOR
        Crawl
' RETURN
        Nectar
    }
    Beat --> Sprout
    Beat --> Nectar
    Beat --> Swirl
    Beat --> Crawl

    class Trace {
        +forager Forager
        +courses Course[]
    }
    Trace --> Forager
    Trace --> Course

    enum Forager {
        Specie
        Primor
        Literal
        SelfRef
    }
    Forager --> Literal
    Forager --> Primor
    Forager --> Specie
    Forager --> SelfRef

    enum Course {
        Carrier
        Catalysis
    }
    Course --> Carrier
    Course --> Catalysis

    class Pollinate {
        +primor Primor
        +trace Trace
    }
    Pollinate --> Primor
    Pollinate --> Trace

    class Nectar {
        +trace Trace
    }
    Nectar --> Trace

    class Sprout {
        +condition Trace
        +matrix Matrix
' elsif
        +splices Splice[]
' else
        +den Matrix?
    }
    Sprout --> Trace
    Sprout --> Matrix
    Sprout --> Splice

    class Splice {
        +condition Trace
        +matrix Matrix
    }
    Splice --> Trace
    Splice --> Matrix

    class Swirl {
        +condition Trace
        +matrix Matrix
    }
    Swirl --> Trace
    Swirl --> Matrix

    class Crawl {
        +primor Primor
        +trace Trace
        +matrix Matrix
    }
    Crawl --> Primor
    Crawl --> Trace
    Crawl --> Matrix

    class Matrix {
        +signals Signal[]
    }
    Matrix --> Signal

    enum Signal {
        behavior
    }
    Signal --> Behavior

    class Catalysis {
        +primor Primor
        +carrier Carrier?
    }
    Catalysis --> Primor
    Catalysis --> Carrier

    class Carrier {
        +transport Transport?
    }
    Carrier --> Transport

    enum Transport {
        Binds
        Sequence
    }
    Transport --> Binds
    Transport --> Sequence

    class Binds {
        +binds Bind[]
    }
    Binds --> Bind

    class Bind {
        +primor Primor
        +trace Trace
    }
    Bind --> Primor
    Bind --> Trace

    class Sequence {
        +oops Trace[]
    }
    Sequence --> Trace

    class Bug {
        +specie Specie
        +genes Gene[]
        +ethics Ethics[]
    }
    Bug --> Specie
    Bug --> Gene
    Bug --> Ethics

    class Gene {
        +primor Primor
        +specie Specie
    }
    Gene --> Primor
    Gene --> Specie

    class Ethics {
        +primor Primor
        +signature Signature?
        +feedback Feedback?
        +matrix Matrix?
    }
    Ethics --> Primor
    Ethics --> Signature
    Ethics --> Feedback
    Ethics --> Matrix

    class Signature {
        +binds EthicsBind[]?
    }
    Signature --> EthicsBind

    class EthicsBind {
        +primor Primor
        +specie Specie
    }
    EthicsBind --> Primor
    EthicsBind --> Specie

    enum Literal {
        Bit
        Hex
        Int
        Str
        Decimal
    }

    class Specie {
        +raw Str
    }

    class Primor {
        +raw Str
    }

    class Feedback {
        +raw Str
    }

    class SelfRef {
        +raw Str
    }
}

package parser {
    class Parser
    class Tree

    Tree --> Parser
}
parser.Tree --> ast.SC

@enduml
